<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SE Specialist Architecture & Pricing Assistant</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #003366 0%, #0078D4 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        header {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            margin-bottom: 30px;
            text-align: center;
        }

        .logo {
            height: 50px;
            margin-bottom: 15px;
        }

        h1 {
            color: #003366;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #666;
            font-size: 1.1em;
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }

        .card.full-width {
            grid-column: 1 / -1;
        }

        .card h2 {
            color: #003366;
            margin-bottom: 20px;
            font-size: 1.5em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 14px;
            font-family: inherit;
            resize: vertical;
            transition: border-color 0.3s;
        }

        textarea:focus {
            outline: none;
            border-color: #003366;
        }

        .examples {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }

        .example-btn {
            padding: 8px 15px;
            border: 2px solid #003366;
            background: white;
            color: #003366;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s;
        }

        .example-btn:hover {
            background: #003366;
            color: white;
        }

        .analyze-btn {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #003366 0%, #0078D4 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 15px;
        }

        .analyze-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #003366;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 20px auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .results {
            display: none;
        }

        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .metric {
            background: linear-gradient(135deg, #003366 0%, #0078D4 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .metric-label {
            font-size: 0.9em;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
        }

        .list-item {
            padding: 10px 15px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #667eea;
        }

        .service-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .service-card h4 {
            color: #003366;
            margin-bottom: 10px;
        }

        .tip-box {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-left: 4px solid #2196f3;
        }

        .chart-container {
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .bar {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .bar-label {
            width: 200px;
            font-weight: bold;
            color: #333;
        }

        .bar-track {
            flex: 1;
            height: 30px;
            background: #e0e0e0;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .bar-fill {
            height: 100%;
            background: linear-gradient(135deg, #003366 0%, #0078D4 100%);
            border-radius: 15px;
            transition: width 1s ease;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-weight: bold;
        }

        .agent-status {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .agent {
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            background: #f8f9fa;
            flex: 1;
            margin: 0 10px;
            transition: all 0.3s;
        }

        .agent.active {
            background: linear-gradient(135deg, #003366 0%, #0078D4 100%);
            color: white;
            transform: scale(1.05);
        }

        .agent-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }

        .architecture-diagram {
            text-align: center;
            font-family: monospace;
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            white-space: pre;
            overflow-x: auto;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 1.8em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <svg class="logo" viewBox="0 0 23 23" xmlns="http://www.w3.org/2000/svg">
                <rect x="0" y="0" width="10.67" height="10.67" fill="#F25022"/>
                <rect x="12.33" y="0" width="10.67" height="10.67" fill="#7FBA00"/>
                <rect x="0" y="12.33" width="10.67" height="10.67" fill="#00A4EF"/>
                <rect x="12.33" y="12.33" width="10.67" height="10.67" fill="#FFB900"/>
            </svg>
            <h1>üèóÔ∏è Specialist Pricing Assistant</h1>
            <p class="subtitle">AI-Powered Multi-Agent System for Azure Pricing</p>
        </header>

        <div class="card full-width">
            <h2>üìù Customer Requirements</h2>
            <div class="examples">
                <button class="example-btn" onclick="loadExample('ecommerce')">E-Commerce Platform</button>
                <button class="example-btn" onclick="loadExample('corporate')">Corporate Website</button>
                <button class="example-btn" onclick="loadExample('iot')">IoT Platform</button>
            </div>
            <textarea id="customerInput" placeholder="Enter customer requirements here...
Example: We need a web application with 1000 daily users, content management, forms, and good performance..."></textarea>
            <button class="analyze-btn" onclick="analyzeRequirements()">üöÄ Analyze Requirements</button>
        </div>

        <div class="loading">
            <div class="spinner"></div>
            <p>Processing with AI Agents...</p>
            <div class="agent-status">
                <div class="agent" id="agent-spec">
                    <div class="agent-icon">üîç</div>
                    <div>Spec Agent</div>
                </div>
                <div class="agent" id="agent-bom">
                    <div class="agent-icon">üèóÔ∏è</div>
                    <div>BOM Agent</div>
                </div>
                <div class="agent" id="agent-pricing">
                    <div class="agent-icon">üí∞</div>
                    <div>Pricing Agent</div>
                </div>
            </div>
        </div>

        <div class="results">
            <div class="metric-grid">
                <div class="metric">
                    <div class="metric-label">Monthly Cost</div>
                    <div class="metric-value" id="monthly-cost">$0.00</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Annual Cost</div>
                    <div class="metric-value" id="annual-cost">$0.00</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Potential Savings</div>
                    <div class="metric-value" id="savings">$0.00</div>
                </div>
                <div class="metric">
                    <div class="metric-label">Optimized Annual</div>
                    <div class="metric-value" id="optimized-cost">$0.00</div>
                </div>
            </div>

            <div class="main-content">
                <div class="card">
                    <h2>üîç Requirements Analysis</h2>
                    <div id="requirements-content"></div>
                </div>

                <div class="card">
                    <h2>üèóÔ∏è Architecture Design</h2>
                    <div id="architecture-content"></div>
                </div>

                <div class="card full-width">
                    <h2>üí∞ Cost Breakdown</h2>
                    <div class="chart-container" id="cost-chart"></div>
                </div>

                <div class="card full-width">
                    <h2>üí° Optimization Tips</h2>
                    <div id="optimization-tips"></div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const examples = {
            ecommerce: `We need to build an e-commerce platform with:
- Support for 50,000 concurrent users
- Product catalog with 100,000+ items
- Shopping cart and payment processing
- User accounts and order history
- Real-time inventory management
- Mobile app integration
- High availability (99.99% SLA)
- PCI-DSS compliance required
- Global distribution (US, EU, APAC)
- Budget: $5,000-8,000/month`,
            
            corporate: `We need a corporate website with:
- About 1,000 daily visitors
- Content management for marketing team
- Contact forms and newsletter
- Blog section with SEO
- Fast load times globally
- SSL and security
- Budget: around $200/month`,
            
            iot: `We need an IoT data processing platform with:
- 10,000 connected devices
- Real-time telemetry ingestion
- Time-series data storage
- Analytics dashboard
- Alert notifications
- Machine learning predictions
- 99.9% uptime requirement
- Budget: $3,000-5,000/month`
        };

        function loadExample(type) {
            document.getElementById('customerInput').value = examples[type];
        }

        async function analyzeRequirements() {
            const input = document.getElementById('customerInput').value;
            if (!input.trim()) {
                alert('Please enter customer requirements');
                return;
            }

            // Show loading
            document.querySelector('.results').style.display = 'none';
            document.querySelector('.loading').style.display = 'block';

            // Animate agents
            setTimeout(() => {
                document.getElementById('agent-spec').classList.add('active');
                setTimeout(() => {
                    document.getElementById('agent-spec').classList.remove('active');
                    document.getElementById('agent-bom').classList.add('active');
                    setTimeout(() => {
                        document.getElementById('agent-bom').classList.remove('active');
                        document.getElementById('agent-pricing').classList.add('active');
                    }, 1000);
                }, 1000);
            }, 500);

            try {
                const response = await fetch('/api/analyze', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify({customer_input: input})
                });

                const data = await response.json();
                
                // Hide loading
                document.querySelector('.loading').style.display = 'none';
                document.getElementById('agent-pricing').classList.remove('active');
                
                // Show results
                displayResults(data);
                
                // Scroll to results
                document.querySelector('.results').scrollIntoView({behavior: 'smooth'});
                
            } catch (error) {
                console.error('Error:', error);
                alert('An error occurred. Please try again.');
                document.querySelector('.loading').style.display = 'none';
            }
        }

        function displayResults(data) {
            const {spec, architecture, pricing} = data;

            // Update metrics
            document.getElementById('monthly-cost').textContent = `$${pricing.monthly_total.toFixed(2)}`;
            document.getElementById('annual-cost').textContent = `$${pricing.annual_total.toFixed(2)}`;
            document.getElementById('savings').textContent = `$${pricing.savings.toFixed(2)}`;
            document.getElementById('optimized-cost').textContent = `$${pricing.optimized_annual.toFixed(2)}`;

            // Requirements
            let reqHTML = '<h4>Identified Requirements:</h4>';
            spec.requirements.forEach(req => {
                reqHTML += `<div class="list-item">‚úì ${req}</div>`;
            });
            reqHTML += '<h4 style="margin-top: 20px;">Clarifying Questions:</h4>';
            spec.clarifying_questions.forEach(q => {
                reqHTML += `<div class="list-item">‚ùì ${q}</div>`;
            });
            document.getElementById('requirements-content').innerHTML = reqHTML;

            // Architecture
            let archHTML = '';
            architecture.architecture_components.forEach(comp => {
                archHTML += `
                    <div class="service-card">
                        <h4>${comp.name}</h4>
                        <p><strong>SKU:</strong> ${comp.sku}</p>
                        <p><strong>Purpose:</strong> ${comp.purpose}</p>
                    </div>
                `;
            });
            document.getElementById('architecture-content').innerHTML = archHTML;

            // Cost breakdown chart
            const maxCost = Math.max(...Object.values(pricing.breakdown));
            let chartHTML = '';
            for (const [service, cost] of Object.entries(pricing.breakdown)) {
                const percentage = (cost / maxCost) * 100;
                chartHTML += `
                    <div class="bar">
                        <div class="bar-label">${service}</div>
                        <div class="bar-track">
                            <div class="bar-fill" style="width: ${percentage}%">$${cost.toFixed(2)}</div>
                        </div>
                    </div>
                `;
            }
            document.getElementById('cost-chart').innerHTML = chartHTML;

            // Optimization tips
            let tipsHTML = '';
            pricing.optimization_tips.forEach((tip, i) => {
                tipsHTML += `<div class="tip-box">üí° <strong>Tip ${i+1}:</strong> ${tip}</div>`;
            });
            document.getElementById('optimization-tips').innerHTML = tipsHTML;

            // Show results
            document.querySelector('.results').style.display = 'block';
        }
    </script>
</body>
</html>
